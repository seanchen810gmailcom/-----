# TNT 磚塊功能說明

## 功能描述

在敲磚塊遊戲中添加了 TNT 磚塊功能，增加遊戲的策略性和爆炸效果。

## 主要特性

### 1. TNT 磚塊生成

- 每局遊戲開始時，會從 50 個磚塊中**隨機選擇 5 個**作為 TNT 磚塊
- TNT 磚塊使用**棕色**（RGB: 139, 69, 19）以便與普通磚塊區分
- TNT 磚塊上會顯示**白色的"TNT"文字**
- 另外會隨機選擇 **6 個非 TNT 磚塊**作為閃爍特殊磚塊

### 2. 爆炸機制

- 當球撞到 TNT 磚塊時，會進入**紅白閃爍倒數狀態**（不是立即爆炸）
- TNT 磚塊會以 0.5 秒為週期進行**紅色 → 白色 → 紅色**的閃爍
- 閃爍 **3 個完整週期**（共 3 秒）後才會爆炸
- 爆炸會摧毀**半徑 100 像素範圍內**的所有磚塊（包括其他 TNT 磚塊）
- 爆炸會產生**視覺效果**（橙紅色擴散圓圈動畫）
- 爆炸可以形成**連鎖反應**

### 3. 特殊磚塊系統

**TNT 磚塊：**

- 玩家可以策略性地瞄準 TNT 磚塊來**一次清除大片磚塊**
- TNT 磚塊的隨機分布增加了每局遊戲的**獨特性**
- 適當利用 TNT 可以更快地完成關卡

**閃爍磚塊：**

- 每局遊戲會有 **6 個閃爍的淡藍色磚塊**
- 這些磚塊會在**淡藍色與亮白色**之間平滑變化
- 當球撞到閃爍磚塊時，會**產生 2 顆額外的球**
- 新產生的球會以隨機方向發射，增加遊戲的混亂與樂趣

### 4. 多球系統

- 遊戲支援**同時存在多顆球**
- 透過撞擊閃爍磚塊可以增加球的數量
- 只要還有**任何一顆球**在場上，遊戲就會繼續
- 所有球都掉落出界時遊戲才結束

## 技術實現

### 程式碼修改

1. **Brick 類別增強**：

   ```python
   class Brick:
       def __init__(self, x, y, width, height, color, is_tnt=False):
           # ... 原有屬性 ...
           self.is_tnt = is_tnt  # TNT標記
           self.is_blinking = False  # 閃爍磚塊標記
           self.tnt_primed = False  # TNT觸發狀態
           self.falling = False  # 下落動畫狀態
   ```

2. **TNT 延遲爆炸系統**：

   ```python
   def start_priming(self):
       # 開始紅白閃爍倒數

   def update(self, now, all_bricks):
       # 處理TNT閃爍倒數與爆炸觸發
   ```

3. **爆炸函數與視覺效果**：

   ```python
   def explode_tnt(tnt_brick, all_bricks):
       # 計算爆炸範圍內的磚塊並摧毀
       # 添加爆炸視覺效果

   class Explosion:
       # 爆炸動畫效果類別
   ```

4. **多球系統**：

   ```python
   balls = []  # 支援多顆球
   # 閃爍磚塊被撞擊時產生額外的球
   ```

5. **得分系統**：

   - 普通磚塊：100 分
   - TNT 爆炸：100 分
   - 被 TNT 炸掉的磚塊：每個 100 分

6. **磚塊下落動畫**：
   - 新關卡開始時磚塊從上方滑落
   - 平滑的下落動畫效果

## 遊戲控制

- **上方向鍵**：發射球（可發射所有黏在底板上的球）
- **左右方向鍵**：移動底板
- **R 鍵**：重新開始遊戲（僅遊戲結束時可用）

## 遊戲機制

### 得分系統

- 擊中普通磚塊：**+100 分**
- TNT 爆炸本身：**+100 分**
- 被 TNT 炸掉的每個磚塊：**+100 分**
- 遊戲結束時顯示最終得分

### 過關機制

- 當所有磚塊被清除時，會自動生成新的一關
- 新關卡的磚塊會從螢幕上方滑落
- TNT 和閃爍磚塊位置會重新隨機分配

### 遊戲結束條件

- 所有球都掉落出螢幕下方時遊戲結束
- 只要有任何一顆球還在場上，遊戲就會繼續

## 測試驗證

已通過以下測試：

- ✅ TNT 延遲爆炸機制（紅白閃爍 3 秒後爆炸）
- ✅ TNT 爆炸範圍檢測與連鎖反應
- ✅ TNT 磚塊隨機選擇
- ✅ 閃爍磚塊隨機生成與視覺效果
- ✅ 多球系統（閃爍磚塊產生額外球體）
- ✅ 磚塊重置功能與下落動畫
- ✅ 爆炸視覺效果
- ✅ 得分系統
- ✅ 自動過關機制
- ✅ 文字顯示功能

## 可能的改進

1. 添加更豐富的爆炸動畫效果
2. 增加音效（爆炸聲、得分聲等）
3. 調整爆炸範圍大小或 TNT 倒數時間
4. 添加更多類型的特殊磚塊
5. 增加難度遞增機制
6. 添加最高分記錄功能
7. 增加道具系統（加速球、放大底板等）
